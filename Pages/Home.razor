@page "/"
@using System.Text.RegularExpressions
@using System.ComponentModel.DataAnnotations
@using MudBlazor
@using System.Text.Json;
@using IC_Eval_FE;
@using IC_Eval_FE.Components;
@inject HttpClient Http

<MudText Typo="Typo.h4">@formTitle</MudText>
@*
    @if (isErrorFetchingConfig)
{
    <MudAlert Severity="MudBlazor.Severity.Error">
        @errorMessage
    </MudAlert>
}
*@

<MudGrid>
    <MudItem xs="12" sm="7">
        <MudPaper Class="pa-4">
            <MudForm @ref="form" @bind-IsValid="@success" OnInvalidSubmit="HandleInvalidSubmit">

                
                @foreach (var field in formFields)
                {
                <MudItem>
                @RenderField(field)
                </MudItem>
                }
                
                

                 


            </MudForm>
        </MudPaper>
        <MudPaper Class="pa-4 mt-4">
            <MudButton Variant="Variant.Filled" Color="Color.Primary" DropShadow="false" OnClick="HandleValidSubmit" >Submit Form</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" DropShadow="false" OnClick="FetchFormConfig" Class="mx-2">Update Form Config</MudButton>
            
        </MudPaper>
    </MudItem>
    <MudItem xs="12" sm="5">
        <MudPaper Class="pa-4 mud-height-full">
            <MudText Typo="Typo.subtitle2">@jsonResponse</MudText>
        </MudPaper>
    </MudItem>
</MudGrid>
